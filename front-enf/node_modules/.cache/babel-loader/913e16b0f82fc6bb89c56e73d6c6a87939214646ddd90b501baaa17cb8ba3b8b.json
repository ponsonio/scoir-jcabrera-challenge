{"ast":null,"code":"var _jsxFileName = \"/Users/koki/go/src/github.com/ponsonio/scoir-jcabrera-challenge/front-enf/src/App.js\";\nimport React from \"react\";\nimport NewLogin from \"./component/form/NewLogin\";\nimport Home from \"./component/home/Home\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/React.createContext();\nconst initialState = {\n  isAuthenticated: false,\n  user: null,\n  token: null\n};\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN\":\n      localStorage.setItem(\"user\", JSON.stringify(action.payload.user));\n      localStorage.setItem(\"token\", JSON.stringify(action.payload.token));\n      return {\n        ...state,\n        isAuthenticated: true,\n        user: action.payload.user,\n        token: action.payload.token\n      };\n    case \"LOGOUT\":\n      localStorage.clear();\n      return {\n        ...state,\n        isAuthenticated: false,\n        user: null\n      };\n    default:\n      return state;\n  }\n};\nfunction App() {\n  const onLoginHandler = async data => {\n    console.log(\"data\", data);\n    try {\n      let res = await fetch(\"http://localhost:8080/login/\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          User: data.enteredUserName,\n          Password: data.enteredUserPassword\n        })\n      });\n      console.log(\"res\", res);\n      if (res.status === 200) {\n        let resJson = await res.json();\n        console.log(\"200 res\", resJson);\n      }\n      if (res.status === 401) {\n        console.log(\"200 res\", res.body);\n      }\n    } catch (err) {\n      console.log(\"catch\", err.statusText);\n      console.log(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: !state.isAuthenticated ? /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 54\n      }, this) : /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 66\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NewLogin, {\n      onLoginHandler: onLoginHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","NewLogin","Home","jsxDEV","_jsxDEV","AuthContext","createContext","initialState","isAuthenticated","user","token","reducer","state","action","type","localStorage","setItem","JSON","stringify","payload","clear","App","onLoginHandler","data","console","log","res","fetch","method","body","User","enteredUserName","Password","enteredUserPassword","status","resJson","json","err","statusText","children","className","Login","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/koki/go/src/github.com/ponsonio/scoir-jcabrera-challenge/front-enf/src/App.js"],"sourcesContent":["import React from \"react\";\nimport NewLogin from \"./component/form/NewLogin\";\nimport Home from \"./component/home/Home\";\n\nexport const AuthContext = React.createContext();\n\nconst initialState = {\n  isAuthenticated: false,\n  user: null,\n  token: null,\n};\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN\":\n      localStorage.setItem(\"user\", JSON.stringify(action.payload.user));\n      localStorage.setItem(\"token\", JSON.stringify(action.payload.token));\n      return {\n        ...state,\n        isAuthenticated: true,\n        user: action.payload.user,\n        token: action.payload.token,\n      };\n    case \"LOGOUT\":\n      localStorage.clear();\n      return {\n        ...state,\n        isAuthenticated: false,\n        user: null,\n      };\n    default:\n      return state;\n  }\n};\n\nfunction App() {\n  const onLoginHandler = async (data) => {\n    console.log(\"data\", data);\n    try {\n      let res = await fetch(\"http://localhost:8080/login/\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          User: data.enteredUserName,\n          Password: data.enteredUserPassword,\n        }),\n      });\n      console.log(\"res\", res);\n      if (res.status === 200) {\n        let resJson = await res.json();\n        console.log(\"200 res\", resJson);\n      }\n      if (res.status === 401) {\n        console.log(\"200 res\", res.body);\n      }\n    } catch (err) {\n      console.log(\"catch\", err.statusText);\n      console.log(err);\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"App\">{!state.isAuthenticated ? <Login /> : <Home />}</div>\n\n      <NewLogin onLoginHandler={onLoginHandler} />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}